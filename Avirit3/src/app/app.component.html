<div class="container">
  <!-- Banner/Menu Section -->
  <div class="banner-section">
    <div class="banner-content">
      <div class="banner-left">
        <span class="banner-subtitle">What's good</span>
        <h1 class="banner-title">IN THE HOOD !</h1>
      </div>
      <div class="banner-separator"></div>
      <div class="banner-right">
        <p class="banner-description">READ & SHARE POSTS IN YOUR OWN NEIGHBORHOOD</p>
        <p class="banner-description">ON A PINBOARD BASED ON YOUR LOCATION</p>
      </div>
    </div>
    
    <div class="search-bar">
      <input 
        type="text" 
        class="search-input" 
        placeholder="Search articles by title or text..."
        [(ngModel)]="searchQuery"
        (keyup.enter)="onSearch()"
        (input)="onSearchInputChange()"
      />
      <button class="go-btn" (click)="onSearch()">
        <span>search</span>
        <svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0L8 4L0 8V0Z" fill="currentColor"/>
        </svg>
      </button>
    </div>
  </div>

  <main class="main-content">
    <div class="articles-header">
      <h2>Articles</h2>
      <button class="create-btn" (click)="openCreateDialog()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span>Create Article</span>
      </button>
    </div>

    <div *ngIf="loading" class="loading">
      <p>Loading articles...</p>
    </div>

    <div *ngIf="error" class="error">
      <p>{{ error }}</p>
      <button (click)="loadArticles()" class="retry-btn">Retry</button>
    </div>

    <div *ngIf="!loading && !error && filteredArticles.length === 0 && articles.length > 0" class="no-articles">
      <p>No articles found matching "{{ searchQuery }}".</p>
      <button class="clear-search-btn" (click)="searchQuery = ''; applySearchFilter()">Clear Search</button>
    </div>

    <div *ngIf="!loading && !error && articles.length === 0" class="no-articles">
      <p>No articles found.</p>
      <button class="create-btn" (click)="openCreateDialog()">Create Your First Article</button>
    </div>

    <div *ngIf="!loading && !error && filteredArticles.length > 0" class="articles-grid">
      <article *ngFor="let article of filteredArticles" class="article-card">
        <h2 class="article-title">{{ article.title }}</h2>
        <p class="article-text">{{ article.text }}</p>
        <div class="article-footer">
          <div class="article-actions">
            <button class="update-btn" (click)="openEditDialog(article)" title="Edit article">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Update</span>
            </button>
            <button class="delete-btn" (click)="deleteArticle(article)" title="Delete article">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 11v6M14 11v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <span>Delete</span>
            </button>
          </div>
        </div>
      </article>
    </div>
  </main>
</div>

<!-- Create/Edit Article Dialog -->
<app-create-article-dialog 
  *ngIf="showCreateDialog"
  [isSubmitting]="isCreatingArticle || isUpdatingArticle"
  [articleToEdit]="articleToEdit"
  (close)="closeCreateDialog()"
  (create)="onCreateArticle($event)"
  (update)="onUpdateArticle($event)"
></app-create-article-dialog>

<!-- Delete Confirmation Dialog -->
<app-delete-confirmation-dialog 
  *ngIf="showDeleteDialog"
  [articleTitle]="articleToDelete?.title || ''"
  [isDeleting]="isDeletingArticle"
  (close)="closeDeleteDialog()"
  (confirm)="confirmDelete()"
></app-delete-confirmation-dialog>
